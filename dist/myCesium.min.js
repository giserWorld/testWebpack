!function(e){var t={};function i(l){if(t[l])return t[l].exports;var o=t[l]={i:l,l:!1,exports:{}};return e[l].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,l){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(l,o,function(t){return e[t]}.bind(null,o));return l},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(module,exports){var myCesium={};function setLayerFeatVisible(e="",t="",i=!0){let l=[];if(e&&t){let o=e.entities.values;for(let e=0;e<o.length;e++){let r=o[e];(r.layerId||"")==t&&(r.show=i,l.push(r))}}return l}window.myCesium=myCesium,myCesium.setWGS84Coords_Z=function(coordDatas,viewer,relativeHeight=0,callback=function(){}){let coords_z=[];function getElevationByCoords(wgs84Coords,terrainProvider,terrainLevel,height,callback){let coords=[];if(terrainLevel=eval(terrainLevel)||14,wgs84Coords&&wgs84Coords.length>0&&terrainProvider){for(let e=0;e<wgs84Coords.length;e++){let t=wgs84Coords[e][0]||"",i=wgs84Coords[e][1]||"";if(!t||!i)continue;let l=Cesium.Cartographic.fromDegrees(t,i);coords.push(l)}let promise=Cesium.sampleTerrain(terrainProvider,terrainLevel,coords);Cesium.when(promise,(function(updatedPositions){let coords_z=[];if(updatedPositions&&updatedPositions.length>0)for(let i=0;i<updatedPositions.length>0;i++){let lon2=Cesium.Math.toDegrees(updatedPositions[i].longitude),lat2=Cesium.Math.toDegrees(updatedPositions[i].latitude),ele=updatedPositions[i].height>=0?eval(updatedPositions[i].height):0;height&&(ele=eval(height)+ele),lon2&&lat2&&coords_z.push([lon2,lat2,ele])}callback(coords_z)}))}}relativeHeight=eval(relativeHeight)>=0?eval(relativeHeight):0,coordDatas&&coordDatas.length>0&&getElevationByCoords(coordDatas,viewer.terrainProvider,12,relativeHeight,callback)},myCesium.geoJsonToWKT_geo=function(e=""){let t="",i="",l="",o="";if(e){"Point"==(l=e.type)?(o="POINT",i=[e.coordinates]):"LineString"==l?(o="LINESTRING",i=e.coordinates):"Polygon"==l&&(o="POLYGON",i=e.coordinates[0]);let r="";if(i&&i.length>0){for(let e=0;e<i.length;e++){let t=i[e];r=r?r+","+t[0]+" "+t[1]:t[0]+" "+t[1]}"Point"==l||"LineString"==l?t=t?t+","+r:r:"Polygon"==l&&(t=t?t+",("+r+")":"("+r+")")}t=o+"("+t+")"}return t},myCesium.geoJsonsToWKT_MultiGeo=function(e=[]){let t="",i="",l="",o="";if(e&&e.length>0){l=e[0].type;for(let r=0;r<e.length;r++){let n=e[r];"Point"==l&&n&&n.type==l?(o="MULTIPOINT",i=[n.coordinates]):"LineString"==l&&n&&n.type==l?(o="MULTILINESTRING",i=n.coordinates):"Polygon"==l&&n&&n.type==l&&(o="MULTIPOLYGON",i=n.coordinates[0]);let a="";if(i&&i.length>0){for(let e=0;e<i.length;e++){let t=i[e];a=a?a+","+t[0]+" "+t[1]:t[0]+" "+t[1]}"Point"==l?t=t?t+",("+a+")":"("+a+")":"LineString"==l?t=t?t+",("+a+")":"("+a+")":"Polygon"==l&&(t=t?t+",(("+a+"))":"(("+a+"))")}}t=o+"("+t+")"}return t},myCesium.createWMSImageryLayer=function(e,t,i="",l="1=1",o=""){let r="";return l=l||"1=1",i=i||"未命名",t=t||"",o=o||"",e&&(r=new Cesium.ImageryLayer(new Cesium.WebMapServiceImageryProvider({title:i,credit:i,url:e,layers:t,parameters:{transparent:!0,format:"image/png",srs:"EPSG:4326",styles:o,cql_filter:l}}))),r},myCesium.pickTopWmsLyrFeat=function(e="",t="",i=[],l=function(){}){if(e&&t&&i){let s="",u=e.camera.getPickRay(t),g=e.scene.globe.pick(u,e.scene),m=e.scene.globe.ellipsoid.cartesianToCartographic(g);for(let e=i.length-1;e>=0;e--){let t=i[e];if(t.show){s=t;break}}if(s&&m){var o=e.camera.positionCartographic.height,r=myCesium.getMapLevelByHeight(o);if(s.show&&s.imageryProvider&&s.imageryProvider.ready){var n=s.imageryProvider.tilingScheme.positionToTileXY(m,r),a=s.imageryProvider.pickFeatures(n.x,n.y,r,m.longitude,m.latitude);Cesium.when(a,(function(e){l(e)}))}}}},myCesium.queryFeat_wfs=function(wfsURL,cql="1=1",callback=function(){}){cql=cql||"1=1",wfsURL&&(wfsURL.match("cql_filter")||(wfsURL=wfsURL+"&cql_filter="+cql),wfsURL+="&service=WFS&version=1.0.0&request=GetFeature&outputFormat=application%2Fjson"),fetch(wfsURL).then(e=>e.text()).then((function(geojsonStr){let geojsonData=eval("("+geojsonStr+")");callback(geojsonData)}))},myCesium.isPointInPolyArray=function(e="",t="",i=[]){let l=!1;if(e&&t&&i&&i.length>0){let o=turf.point([e,t]);for(let e=0;e<i.length;e++){let t=i[e],r="";if(t.type&&"Polygon"==t.type?r=turf.polygon(t.coordinates):t.type&&"MultiPolygon"==t.type&&(r=turf.multiPolygon(t.coordinates)),o&&r){1==turf.booleanPointInPolygon(o,r)&&(l=!0)}}}return i&&0!=i.length||(l=!0),l},myCesium.getEntityLyrByName=function(e=[],t=""){let i=null;if(t&&e&&e.length>0)for(let l=0;l<e.length;l++){let o=e[l];if("entityLayer"==o.lyrType&&o.title==t){i=o;break}}return i},myCesium.getMaxTiledLevel=function(e=""){let t=1;if(e){e.scene.globe._surface._tilesToRender.forEach((function(e){e.level>t&&(t=e.level)}))}return t},myCesium.clearAll=function(e="",t=""){if(e&&t&&t.length>0){e.entities&&e.entities.removeAll();for(let e=0;e<t.length;e++){let i=t[e],l=(i.lyrId,i.lyrType||"");"entityLayer"==l&&(i._children=[])}}},myCesium.calcFitDwRect_geojsonArray=function(geojsonArray,zoom=100){let dwRectangle=null;if(zoom=eval(zoom)||100,geojsonArray&&geojsonArray.length>0){let e=calcGeojsonArrayRect(geojsonArray),t=getWGS84Array_rect(e),i=turf.polygon([t]),l=turf.buffer(i,zoom,{units:"kilometers"}),o=turf.getCoords(l),r=myCesium.transToCartesian3Coords(o[0]);dwRectangle=Cesium.Rectangle.fromCartesianArray(r)}return dwRectangle;function getWGS84Array_rect(e=""){let t=null;if(e){let i=e.west,l=e.south,o=e.east,r=e.north,n=[i,r,o,r,o,l,i,l,i,r];t=function(e){let t=[];if(e&&e.length>0)for(let l=0;l<e.length;l++){let o=i(e[l]),r=o.longitude,n=o.latitude;t.push([r,n])}return t;function i(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t}}(Cesium.Cartesian3.fromRadiansArray(n))}return t}function calcGeojsonArrayRect(e){let t=null,i=[];if(e&&e.length>0)for(let l=0;l<e.length;l++){let o=e[l],r=o.type,n=o.coordinates;if("Point"==r){let e=o.coordinates,t=turf.point(e),l=turf.buffer(t,.005,{units:"kilometers"}),r=turf.getCoords(l),n=myCesium.transToCartesian3Coords(r[0]);i.push(n)}else if("LineString"==r){let e=myCesium.transToCartesian3Coords(n);i.push(e)}else if("Polygon"==r){let e=myCesium.transToCartesian3Coords(n[0]);i.push(e)}else if("MultiPoint"==r){let e=o.coordinates;for(let t=0;t<e.length;t++){let l=e[t],o=turf.point(l),r=turf.buffer(o,.005,{units:"kilometers"}),n=turf.getCoords(r),a=myCesium.transToCartesian3Coords(n[0]);i.push(a)}}else if("MultiLineString"==r){let e=o.coordinates;for(let t=0;t<e.length;t++){let l=e[t],o=myCesium.transToCartesian3Coords(l);i.push(o)}}else if("MultiPolygon"==r){let e=o.coordinates;for(let t=0;t<e.length;t++){let l=e[t],o=myCesium.transToCartesian3Coords(l[0]);i.push(o)}}i&&i.length>0&&i.forEach((function(e){if(t){var i=Cesium.Rectangle.fromCartesianArray(e);t=Cesium.Rectangle.union(t,i)}else t=Cesium.Rectangle.fromCartesianArray(e)}))}return t}},myCesium.calcFitDwRect_entityArray=function(entityArray,zoom=100){let dwRectangle=null;if(zoom=eval(zoom)||100,entityArray&&entityArray.length>0){let e=calcEntityArrayRect(entityArray),t=getWGS84Array_rect(e),i=turf.polygon([t]),l=turf.buffer(i,zoom,{units:"kilometers"}),o=turf.getCoords(l),r=myCesium.transToCartesian3Coords(o[0]);dwRectangle=Cesium.Rectangle.fromCartesianArray(r)}return dwRectangle;function getWGS84Array_rect(e=""){let t=null;if(e){let i=e.west,l=e.south,o=e.east,r=e.north,n=[i,r,o,r,o,l,i,l,i,r];t=function(e){let t=[];if(e&&e.length>0)for(let l=0;l<e.length;l++){let o=i(e[l]),r=o.longitude,n=o.latitude;t.push([r,n])}return t;function i(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t}}(Cesium.Cartesian3.fromRadiansArray(n))}return t}function calcEntityArrayRect(e){let t=null,i="",l=[];if(e&&e.length>0)for(let n=0;n<e.length;n++){let a=e[n],s=a.point||"",u=a.billboard||"",g=a.polyline||"",m=a.polygon||"";if((!s||u||g||m)&&(s||!u||g||m)?s||u||!g||m?s||u||!m||(i="Polygon",(l=a.polygon.hierarchy.getValue().positions||"")||(l=a.polygon.hierarchy.getValue())):(i="LineString",l=a.polyline.positions.getValue()||""):(i="Point",l=[a.position._value]),"Point"==i){let e=r(l[0]),t=turf.point([e.longitude,e.latitude]),i=turf.buffer(t,.005,{units:"kilometers"}),o=turf.getCoords(i);l=myCesium.transToCartesian3Coords(o[0])}if(l&&l.length>0)if(t){var o=Cesium.Rectangle.fromCartesianArray(l);t=Cesium.Rectangle.union(t,o)}else t=Cesium.Rectangle.fromCartesianArray(l)}return t;function r(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t}}},myCesium.calcGeojsonArrayRect=function(e){let t=null,i=[];if(e&&e.length>0)for(let l=0;l<e.length;l++){let o=e[l],r=o.type,n=o.coordinates;if("Point"==r){let e=o.coordinates,t=turf.point(e),l=turf.buffer(t,.005,{units:"kilometers"}),r=turf.getCoords(l),n=myCesium.transToCartesian3Coords(r[0]);i.push(n)}else if("LineString"==r){let e=myCesium.transToCartesian3Coords(n);i.push(e)}else if("Polygon"==r){let e=myCesium.transToCartesian3Coords(n[0]);i.push(e)}else if("MultiPoint"==r){let e=o.coordinates;for(let t=0;t<e.length;t++){let l=e[t],o=turf.point(l),r=turf.buffer(o,.005,{units:"kilometers"}),n=turf.getCoords(r),a=myCesium.transToCartesian3Coords(n[0]);i.push(a)}}else if("MultiLineString"==r){let e=o.coordinates;for(let t=0;t<e.length;t++){let l=e[t],o=myCesium.transToCartesian3Coords(l);i.push(o)}}else if("MultiPolygon"==r){let e=o.coordinates;for(let t=0;t<e.length;t++){let l=e[t],o=myCesium.transToCartesian3Coords(l[0]);i.push(o)}}i&&i.length>0&&i.forEach((function(e){if(t){var i=Cesium.Rectangle.fromCartesianArray(e);t=Cesium.Rectangle.union(t,i)}else t=Cesium.Rectangle.fromCartesianArray(e)}))}return t},myCesium.calcEntityArrayRect=function(e){let t=null,i="",l=[];if(e&&e.length>0)for(let n=0;n<e.length;n++){let a=e[n],s=a.point||"",u=a.billboard||"",g=a.polyline||"",m=a.polygon||"";if((!s||u||g||m)&&(s||!u||g||m)?s||u||!g||m?s||u||!m||(i="Polygon",(l=a.polygon.hierarchy.getValue().positions||"")||(l=a.polygon.hierarchy.getValue())):(i="LineString",l=a.polyline.positions.getValue()||""):(i="Point",l=[a.position._value]),"Point"==i){let e=r(l[0]),t=turf.point([e.longitude,e.latitude]),i=turf.buffer(t,.005,{units:"kilometers"}),o=turf.getCoords(i);l=myCesium.transToCartesian3Coords(o[0])}if(l&&l.length>0)if(t){var o=Cesium.Rectangle.fromCartesianArray(l);t=Cesium.Rectangle.union(t,o)}else t=Cesium.Rectangle.fromCartesianArray(l)}return t;function r(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t}},myCesium.getWGS84Array_rect=function(e=""){let t=null;if(e){let i=e.west,l=e.south,o=e.east,r=e.north,n=[i,r,o,r,o,l,i,l,i,r];t=function(e){let t=[];if(e&&e.length>0)for(let l=0;l<e.length;l++){let o=i(e[l]),r=o.longitude,n=o.latitude;t.push([r,n])}return t;function i(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t}}(Cesium.Cartesian3.fromRadiansArray(n))}return t},myCesium.getCar3Array_rect=function(e=""){let t=null;if(e){let i=e.west,l=e.south,o=e.east,r=e.north,n=[i,r,o,r,o,l,i,l,i,r];t=Cesium.Cartesian3.fromRadiansArray(n)}return t},myCesium.highLightFeat_self=function(e=""){if(e){let t=e.point||"",i=e.billboard||"",l=e.polyline||"",o=e.polygon||"",r=e.lightColor||"",n=e.normalColor||"";!r&&e.properties.lightColor&&(r=e.properties.lightColor._value),!n&&e.properties.normalColor&&(n=e.properties.normalColor._value),r||(r="#00FFFF"),n||(n="#0000FF");e.properties;let a=e.properties.isHighLight?e.properties.isHighLight._value:"false";(!t||i||l||o)&&(t||!i||l||o)&&(t||i||!l||o?!t&&!i&&l&&o&&("true"==a?(e.polyline.material=Cesium.Color.fromCssColorString(n).withAlpha(1),e.polyline.width=2,e.properties.isHighLight._value="false"):(e.polyline.material=Cesium.Color.fromCssColorString(r).withAlpha(1),e.polyline.width=4,e.properties.isHighLight._value="true")):"true"==a?(e.polyline.material=Cesium.Color.fromCssColorString(n).withAlpha(1),e.polyline.width=2,e.properties.isHighLight._value="false"):(e.polyline.material=Cesium.Color.fromCssColorString(r).withAlpha(1),e.polyline.width=4,e.properties.isHighLight._value="true"))}},myCesium.lightCoord_custom=function(e="",t="",i={},l="#00FFFF",o="false"){let r=[],n=null;if(l=l||"#00FFFF",o=o||"false",e&&t){"true"!=o&&1!=o||e.removeAll();let a=t.type||"",s=t.coordinates||"",u=[];i.type="GeometryInstance";let g=JSON.stringify(i);if(s&&"Point"==a){let e=myCesium.transToCartesian3Coords([s]);u.push(e)}else if(s&&"LineString"==a){let e=myCesium.transToCartesian3Coords(s);u.push(e)}else if(s&&"Polygon"==a){let e=myCesium.transToCartesian3Coords(s[0]);u.push(e)}else if(s&&"MultiPoint"==a){let e=myCesium.transToCartesian3Coords(s[0]);u.push(e)}else if(s&&"MultiLineString"==a)for(let e=0;e<s.length;e++){let t=s[e],i=myCesium.transToCartesian3Coords(t);u.push(i)}else if(s&&"MultiPolygon"==a)for(let e=0;e<s.length;e++){let t=s[e][0],i=myCesium.transToCartesian3Coords(t);u.push(i)}if(u&&u.length>0){if("dot"==a);else if("Point"==a);else if("LineString"==a||"MultiLineString"==a)for(let e=0;e<u.length;e++){let t=u[e],i=new Cesium.GroundPolylineGeometry({positions:t,width:4});n=new Cesium.GeometryInstance({title:"高亮线图形",id:g,geometry:i});let o=new Cesium.GroundPolylinePrimitive({geometryInstances:n,appearance:new Cesium.PolylineMaterialAppearance({material:Cesium.Material.fromType("Color",{color:Cesium.Color.fromCssColorString(l).withAlpha(1)})})});r.push(o)}else if("Polygon"==a||"MultiPolygon"==a)for(let e=0;e<u.length;e++){let t=u[e],i=new Cesium.GroundPolylineGeometry({positions:t,width:4});n=new Cesium.GeometryInstance({id:g,title:"高亮面图形",geometry:i});let o=new Cesium.GroundPolylinePrimitive({geometryInstances:n,appearance:new Cesium.MaterialAppearance({material:Cesium.Material.fromType("Color",{color:Cesium.Color.fromCssColorString(l).withAlpha(1)})})});r.push(o)}r&&r.length>0&&e&&r.forEach((function(t){e.add(t)}))}}return n},myCesium.lightFeat_custom=function(e="",t="",i="#00FFFF",l="false"){let o=null;if(i=i||"#00FFFF",l=l||"false",e&&t){"true"==l&&e.removeAll();let n=t.point||"",a=t.billboard||"",s=t.polyline||"",u=t.polygon||"",g="",m="",h=(new Date).getTime();if(n&&!a&&!s&&!u){g="dot",m=[t.position._value||""]}if(n||!a||s||u?n||a||!s||u?!n&&!a&&s&&u&&(g="Polygon",(m=t.polygon.hierarchy.getValue().positions||"")||(m=t.polygon.hierarchy.getValue())):(g="LineString",m=t.polyline.positions.getValue()||""):(g="Point",t.billboard.scale=1.2),t.properties&&(h=t.properties.globalId?t.properties.globalId._value:""),m&&m.length>0){if("dot"==g){var r=n.pixelSize.getValue();Number.isInteger(r/1.337)||(n.pixelSize=1.337*n.pixelSize)}else if("Point"==g);else if("LineString"==g){let e=new Cesium.GroundPolylineGeometry({positions:m,width:3}),t=new Cesium.GeometryInstance({title:"高亮线图形",geometry:e});o=new Cesium.GroundPolylinePrimitive({geometryInstances:t,appearance:new Cesium.PolylineMaterialAppearance({material:Cesium.Material.fromType("Color",{color:Cesium.Color.fromCssColorString(i).withAlpha(1)})})})}else{let e=new Cesium.GroundPolylineGeometry({positions:m,width:3}),t=new Cesium.GeometryInstance({title:"高亮面图形",geometry:e});o=new Cesium.GroundPolylinePrimitive({geometryInstances:t,appearance:new Cesium.MaterialAppearance({material:Cesium.Material.fromType("Color",{color:Cesium.Color.fromCssColorString(i).withAlpha(1)})})})}o&&e&&e.add(o)}}return o},myCesium.getImageryLayer_credit=function(e="",t=""){let i=null;if(e&&t){let l=e.imageryLayers._layers||[];for(let e=0;e<l.length;e++){let o=l[e],r=o.imageryProvider.credit;if(r&&r.html==t){i=o;break}}}return i},myCesium.dynamicCreateLayer=function(e="",t,i={}){let l=null;if(t&&e){let o=t.layerName||"未命名",r=t.layerId||"";l=new Cesium.Entity({title:o,lyrNodeName:"",lyrNodeKey:"",lyrInfo:i,lyrIndex:"",lyrId:r,lyrType:"entityLayer"}),e.push(l)}return l},myCesium.createLayerLegend_ul_fc=function(e,t){var i="",l=document.getElementById("legend_title2");if(e&&!l){document.getElementById(e).innerHTML="";document.getElementById(e).innerHTML="<div class='legendContainer2'><ul class='legend_ul2' id='legend_ul2'><li class='legend_ul_li2'><div class='legend_title2' id='legend_title2'>图例</div></li></ul></div>"}var o=t.layerName||"未命名",r=t.layerId||"",n=t.layerType||"",a=t.layerStyle||"",s=t.layerStatus||"true",u=t.geoType||"",g=t.childLegends||[];if(e&&r&&a){var m=a.color||"#000000",h=a.pointColor||m,d=a.pointSize||10,c=a.ptIconURL||"",C=a.icoPath||"",y=a.lineWidth||2,p=a.lineColor||m,f=a.lineStyle||"Color",w=a.fillColor||m,v=a.alphaValue||1,P=a.fillStyle||"Color",b=a.borderWidth||2,S=a.borderColor||m;t={layerName:o,layerId:r,layerType:n,styleType:u,color:m,pointColor:h,pointSize:d,ptIconURL:c,icoPath:C,lineWidth:y,lineColor:p,lineStyle:f,fillColor:w,alphaValue:v,fillStyle:P,borderWidth:b,borderColor:S,borderStyle:a.borderStyle||"Color"};t=JSON.stringify(t);var _=null;if(u||(c?u="Point":S&&!w?u="LineString":w&&(u="Polygon")),"Point"==u?_=c||L(6,h):"LineString"==u?_=I(12,10,p):"Polygon"==u&&(_=E(12,10,w)),_){if(g.length>0){var T=function(e){var t="";if(e&&e.length>0)for(let S=0;S<e.length;S++){var i=(P=e[S]).layerName||"未命名",l=P.layerId||"",o=P.layerType||"",r=P.layerStyle||"",n=P.geoType||"";if(l&&r){var a=r.color||"#000000",s=r.pointColor||a,u=r.pointSize||10,g=r.ptIconURL||"",m=r.icoPath||"",h=r.lineWidth||2,d=r.lineColor||a,c=r.lineStyle||"Color",C=r.fillColor||a,y=r.alphaValue||1,p=r.fillStyle||"Color",f=r.borderWidth||2,w=r.borderColor||a,v=r.borderStyle||"Color",P={layerName:i,layerId:l,layerType:o,styleType:n,color:a,pointColor:s,pointSize:u,ptIconURL:g,icoPath:m,lineWidth:h,lineColor:d,lineStyle:c,fillColor:C,alphaValue:y,fillStyle:p,borderWidth:f,borderColor:w,borderStyle:v};P=JSON.stringify(P);var b=null;n||(g?n="Point":w&&!C?n="LineString":C&&(n="Polygon")),"Point"==n?b=g||L(6,s):"LineString"==n?b=I(12,10,d):"Polygon"==n&&(b=E(12,10,C)),b&&(t=t+"<li class='legend_ul_li2'><div class='legend_li_a2'><div class='legend_checkboxDiv2 legend_checkboxDiv3'><input type='checkbox' checked id='"+l+"' name='"+P+"' class='legend_checkbox2 legend_checkbox3'/></div><div class='legend_text2'><a href='javascript:void(0)' class='legend_xzStyle2' id='"+l+"' name='"+P+"'><img class='legend_img2' src='"+b+"'/></a><span>"+i+"</span></div></div></li>")}}return t}(g);if(T){i=i+"<li class='legend_ul_li2'><div class='legend_li_a2'><div class='legend_checkboxDiv2'><input type='checkbox' "+("true"==s?"checked":"")+" id='"+r+"' name='"+t+"' class='legend_checkbox2'/></div><div class='legend_text2'><a href='javascript:void(0)' class='legend_xzStyle2 legend_xzStyle3' id='"+r+"' name='"+t+"'><img class='legend_img2' src='"+_+"'/></a><span>"+o+"</span></div></div></li><li class='legend_ul_li2'><ul class='legend_ul2' id='legend_ul3'>"+T+"</ul></li>"}}else{i=i+"<li class='legend_ul_li2'><div class='legend_li_a2'><div class='legend_checkboxDiv2'><input type='checkbox' "+("true"==s?"checked":"")+" id='"+r+"' name='"+t+"' class='legend_checkbox2'/></div><div class='legend_text2'><a href='javascript:void(0)' class='legend_xzStyle2' id='"+r+"' name='"+t+"'><img class='legend_img2' src='"+_+"'/></a><span>"+o+"</span></div></div></li>"}document.getElementById("legend_ul2").insertAdjacentHTML("beforeend",i)}}function I(e,t,i){let l=null;if(e&&t&&i){let o=document.createElement("canvas");o.width=e,o.height=t;let r=o.getContext("2d"),n=e-2,a=t/2;r.beginPath(),r.strokeStyle=i,r.lineWidth=2,r.moveTo(1,a),r.lineTo(1+n,a),r.stroke(),l=o.toDataURL()}return l}function E(e,t,i,l){let o=null;if(l=l||i,e&&t&&i){let r=document.createElement("canvas");r.width=e,r.height=t;let n=r.getContext("2d"),a=e-2,s=t-2;n.beginPath(),n.fillStyle=i,n.fillRect(1,1,a,s),n.strokeStyle=l,n.strokeRect(1,1,a,s),n.strokeRect(1,1,a,s),o=r.toDataURL()}return o}function L(e,t){let i=null;if(e&&t){let l=document.createElement("canvas");l.width=2*e+2,l.height=2*e+2;let o=l.getContext("2d"),r=parseInt(e+1),n=parseInt(e+1);o.beginPath(),o.strokeStyle=t,o.fillStyle=t,o.lineWidth=2,o.beginPath(),o.arc(r,n,e,0,2*Math.PI),o.fill(),o.stroke(),i=l.toDataURL()}return i}},myCesium.createLayerLegend_ul2=function(e,t){var i="",l=document.getElementById("legend_title");if(e&&!l){document.getElementById(e).innerHTML="";document.getElementById(e).innerHTML="<div class='legendContainer'><ul class='legend_ul' id='legend_ul'><li class='legend_ul_li'><div class='legend_title' id='legend_title'>图例</div></li></ul></div>"}var o=t.layerName||"未命名",r=t.layerId||"",n=t.layerStyle||"",a=t.geoType||"";if(e&&r&&n){var s=n.imgURL||"",u=n.color||"#000000",g=n.borderWidth||"2",m=n.borderColor||"",h=n.fillColor||"";t={layerName:o,layerId:r,styleType:a,imgURL:s,borderWidth:g,borderColor:m,fillColor:h};t=JSON.stringify(t);var d=null;a||(s?a="Point":m&&!h?a="LineString":h&&(a="Polygon")),"Point"==a?d=s||function(e,t){let i=null;if(e&&t){let l=document.createElement("canvas");l.width=2*e+2,l.height=2*e+2;let o=l.getContext("2d"),r=parseInt(e+1),n=parseInt(e+1);o.beginPath(),o.strokeStyle=t,o.fillStyle=t,o.lineWidth=2,o.beginPath(),o.arc(r,n,e,0,2*Math.PI),o.fill(),o.stroke(),i=l.toDataURL()}return i}(6,u):"LineString"==a?d=function(e,t,i){let l=null;if(e&&t&&i){let o=document.createElement("canvas");o.width=e,o.height=t;let r=o.getContext("2d"),n=e-2,a=t/2;r.beginPath(),r.strokeStyle=i,r.lineWidth=2,r.moveTo(1,a),r.lineTo(1+n,a),r.stroke(),l=o.toDataURL()}return l}(12,10,m):"Polygon"==a&&(d=function(e,t,i,l){let o=null;if(l=l||i,e&&t&&i){let r=document.createElement("canvas");r.width=e,r.height=t;let n=r.getContext("2d"),a=e-2,s=t-2;n.beginPath(),n.fillStyle=i,n.fillRect(1,1,a,s),n.strokeStyle=l,n.strokeRect(1,1,a,s),n.strokeRect(1,1,a,s),o=r.toDataURL()}return o}(12,10,h)),d&&(i=i+"<li class='legend_ul_li'><div class='legend_li_a'><div class='legend_text'><a href='javascript:void(0)' class='legend_xzStyle' id='"+r+"' name='"+t+"'><img class='legend_img' src='"+d+"'/></a><span>"+o+"</span></div><div class='legend_checkboxDiv'><input type='checkbox' checked id='"+r+"' name='"+t+"' class='legend_checkbox'/></div></div></li>",document.getElementById("legend_ul").insertAdjacentHTML("beforeend",i))}},myCesium.createLayerLegend_ul3=function(e,t){var i="",l=document.getElementById("legend_title");if(e&&!l){document.getElementById(e).innerHTML="";document.getElementById(e).innerHTML="<div class='legendContainer'><ul class='legend_ul5' id='legend_ul'><li class='legend_ul_li5'><div class='legend_title5' id='legend_title'>图例</div></li></ul></div>"}var o=t.layerName||"未命名",r=t.layerId||"",n=t.layerType||"",a=t.layerStyle||"",s=t.layerStatus,u=t.geoType||"";if(e&&r&&a){var g=a.color||"#000000",m=a.pointColor||g,h=a.pointSize||10,d=a.ptIconURL||"",c=a.icoPath||"",C=a.lineWidth||2,y=a.lineColor||g,p=a.lineStyle||"Color",f=a.fillColor||g,w=a.alphaValue||1,v=a.fillStyle||"Color",P=a.borderWidth||2,b=a.borderColor||g;t={layerName:o,layerId:r,layerType:n,layerStatus:s,styleType:u,color:g,pointColor:m,pointSize:h,ptIconURL:d,icoPath:c,lineWidth:C,lineColor:y,lineStyle:p,fillColor:f,alphaValue:w,fillStyle:v,borderWidth:P,borderColor:b,borderStyle:a.borderStyle||"Color"};t=JSON.stringify(t);var S=null;if(u||(d?u="Point":b&&!f?u="LineString":f&&(u="Polygon")),"Point"==u?S=d||function(e,t){let i=null;if(e&&t){let l=document.createElement("canvas");l.width=2*e+2,l.height=2*e+2;let o=l.getContext("2d"),r=parseInt(e+1),n=parseInt(e+1);o.beginPath(),o.strokeStyle=t,o.fillStyle=t,o.lineWidth=2,o.beginPath(),o.arc(r,n,e,0,2*Math.PI),o.fill(),o.stroke(),i=l.toDataURL()}return i}(6,m):"LineString"==u?S=function(e,t,i){let l=null;if(e&&t&&i){let o=document.createElement("canvas");o.width=e,o.height=t;let r=o.getContext("2d"),n=e-2,a=t/2;r.beginPath(),r.strokeStyle=i,r.lineWidth=2,r.moveTo(1,a),r.lineTo(1+n,a),r.stroke(),l=o.toDataURL()}return l}(12,10,y):"Polygon"==u&&(S=function(e,t,i,l){let o=null;if(l=l||i,e&&t&&i){let r=document.createElement("canvas");r.width=e,r.height=t;let n=r.getContext("2d"),a=e-2,s=t-2;n.beginPath(),n.fillStyle=i,n.fillRect(1,1,a,s),n.strokeStyle=l,n.strokeRect(1,1,a,s),n.strokeRect(1,1,a,s),o=r.toDataURL()}return o}(12,10,f)),S){i=i+"<li class='legend_ul_li5'><div class='legend_li_a5'><a href='javascript:void(0)' class='legend_xzStyle5' id='"+r+"' name='"+t+"'><img class='legend_img5' src='"+S+"'/></a><div class='legend_text5'><a href='javascript:void(0)' class='legend_xzText5' id='"+r+"' name='"+t+"'><span class='legend_name5'>"+o+"</span></a></div></div></li>",document.getElementById("legend_ul").insertAdjacentHTML("beforeend",i)}}},myCesium.createLayerLegend_ul=function(e,t){if(e&&t&&t.length>0){let y="<div class='legendContainer'><ul class='legend_ul' id='legend_ul'><li class='legend_ul_li'><div class='legend_title' id='legend_title'>图例</div></li></ul></div>";document.getElementById(e).innerHTML=y;let p="";for(let e=0;e<t.length;e++){var i=(m=t[e]).layerName||"未命名",l=m.layerId||"",o=m.layerStyle||"",r=m.geoType||"";if(l&&o){var n=o.imgURL||"",a=o.color||"#000000",s=o.borderWidth||"2",u=o.borderColor||"",g=o.fillColor||"",m={layerName:i,layerId:l,styleType:r,imgURL:n,borderWidth:s,borderColor:u,fillColor:g};m=JSON.stringify(m);var h=null;r||(n?r="Point":u&&!g?r="LineString":g&&(r="Polygon")),"Point"==r?h=n||d(6,a):"LineString"==r?h=c(12,10,u):"Polygon"==r&&(h=C(12,10,g)),h&&(p=p+"<li class='legend_ul_li'><div class='legend_li_a'><div class='legend_text'><a href='javascript:void(0)' class='legend_xzStyle' id='"+l+"' name='"+m+"'><img class='legend_img' src='"+h+"'/></a><span>"+i+"</span></div><div class='legend_checkboxDiv'><input type='checkbox' checked id='"+l+"' name='"+m+"' class='legend_checkbox'/></div></div></li>")}}document.getElementById("legend_ul").insertAdjacentHTML("beforeend",p)}function d(e,t){let i=null;if(e&&t){let l=document.createElement("canvas");l.width=2*e+2,l.height=2*e+2;let o=l.getContext("2d"),r=parseInt(e+1),n=parseInt(e+1);o.beginPath(),o.strokeStyle=t,o.fillStyle=t,o.lineWidth=2,o.beginPath(),o.arc(r,n,e,0,2*Math.PI),o.fill(),o.stroke(),i=l.toDataURL()}return i}function c(e,t,i){let l=null;if(e&&t&&i){let o=document.createElement("canvas");o.width=e,o.height=t;let r=o.getContext("2d"),n=e-2,a=t/2;r.beginPath(),r.strokeStyle=i,r.lineWidth=2,r.moveTo(1,a),r.lineTo(1+n,a),r.stroke(),l=o.toDataURL()}return l}function C(e,t,i,l){let o=null;if(l=l||i,e&&t&&i){let r=document.createElement("canvas");r.width=e,r.height=t;let n=r.getContext("2d"),a=e-2,s=t-2;n.beginPath(),n.fillStyle=i,n.fillRect(1,1,a,s),n.strokeStyle=l,n.strokeRect(1,1,a,s),n.strokeRect(1,1,a,s),o=r.toDataURL()}return o}},myCesium.dwByEntityArray=function(e,t,i="",l="false"){if(e&&t&&t.length>0){let o=new Cesium.HeadingPitchRange(Cesium.Math.toRadians(0),Cesium.Math.toRadians(-90),Cesium.Math.toRadians(0));e.zoomTo(t,o).then((function(){window.setTimeout((function(){"false"==l&&(i&&(i.show=!1),function(e="",t=""){if(e&&t){var i=t._children;i&&i.forEach((function(t){if(e.entities.contains(t)){e.entities.remove(t);let l=i.indexOf(t);i.splice(l,1)}}))}}(e,i),t.forEach((function(t){e.entities.contains(t)&&e.entities.remove(t)})),i&&(i.show=!0),t=[])}),100)}))}},myCesium.clearEntityLayer=function(e="",t=""){if(e&&t){var i=t._children;i&&i.forEach((function(t){if(e.entities.contains(t)){e.entities.remove(t);let l=i.indexOf(t);i.splice(l,1)}}))}},myCesium.clearEntityLayer_all=function(e,t,i){e&&t&&i&&i._children&&i._children.length>0&&(e.entities.removeAll(),i._children=[],window.setTimeout((function(){let l=i.lyrId||"";l||(l=l.id||"");for(let i=0;i<t.length;i++){let o=t[i],r=o.lyrId||"";if("entityLayer"==(o.lyrType||"")&&(r||(r=o.id||""),l&&r&&l!=r)){o._children.forEach((function(t){e.entities.add(t)}))}}}),100))},myCesium.getTopEntityFeat=function(e,t){let i=e[e.length-1],l=-1,o=i.id?i.id.geoType:"other",r={Point:3,LineString:2,Polygon:1,other:0};if(t&&e&&e.length>0)for(let n=0;n<e.length;n++){let a=e[n];a.id&&(a=a.id);let s=a.layerId||"",u=myCesium.getLyrObjByLyrId(t,s);if(u&&u.layer){let t=u.layer.lyrIndex;if(t&&t>l)i=e[n],l=t,o=a.geoType||"other";else if(t&&t==l){r[a.geoType||"other"]>r[o]&&(i=e[n],l=t,o=a.geoType||"other")}}else{r[a.geoType||"other"]>r[o]&&(i=e[n],o=a.geoType||"other")}}return i},myCesium.removeEntityFromlyr=function(e,t,i="",l="id"){if(e&&t&&i){let o=function(e=""){let t=[];if(e){let i=e.lyrType||"";"dataSource"==i?t=e.values:"entityLayer"==i?t=e._children:e.values?t=e.values:e._children&&(t=e._children)}return t}(t);for(let t=0;t<o.length;t++){let r=o[t],n=r.id||"",a=r.properties.globalId?r.properties.globalId._value:"",s=null;if(i==(s="attr"==l?a:n)){e.entities.contains(r)&&e.entities.remove(r);let t=o.indexOf(r);o.splice(t,1)}}}},myCesium.removeEntityFromArray=function(e,t="",i="id"){if(e&&e.length>0&&t)for(let l=0;l<e.length;l++){let o=e[l],r=o.id||"",n=o.properties.globalId?o.properties.globalId._value:"",a=null;if(t==(a="attr"==i?n:r)){let t=e.indexOf(o);e.splice(t,1)}}},myCesium.getAllEntityFromLyr=function(e=""){let t=[];if(e){let i=e.lyrType||"";"dataSource"==i?t=e.values:"entityLayer"==i?t=e._children:e.values?t=e.values:e._children&&(t=e._children)}return t},myCesium.getCartesian3CoordsFromEntity=function(e=""){let t="",i="";if(e){let l=e.point||"",o=e.billboard||"",r=e.polyline||"",n=e.polygon||"";(!l||o||r||n)&&(l||!o||r||n)?l||o||!r||n?!l&&!o&&r&&n&&(t="Polygon",(i=e.polygon.hierarchy.getValue().positions||"")||(i=e.polygon.hierarchy.getValue())):(t="LineString",i=e.polyline.positions.getValue()||""):(t="Point",i=[e.position._value])}return{type:t,coordinates:i}},myCesium.getWGS84CoordsFromEntity=function(e=""){let t="",i="";if(e){let l=e.billboard||"",o=e.polyline||"",r=e.polygon||"";!l||o||r?l||!o||r?!l&&o&&r&&(t="Polygon",(i=e.polygon.hierarchy.getValue().positions||"")||(i=e.polygon.hierarchy.getValue())):(t="LineString",i=e.polyline.positions.getValue()||""):(t="Point",i=e.position)}return i&&(i=function(e){let t=[];if(e&&e.length>0)for(let l=0;l<e.length;l++){let o=i(e[l]),r=o.longitude,n=o.latitude;t.push([r,n])}return t;function i(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t}}(i)),{geoType:t,geoCoords:i}},myCesium.getPrimitiveById=function(e="",t=""){let i=null;if(e&&t)for(let l=0;l<e._primitives.length;l++){let o=e._primitives[l],r=null;if(t==((r=o.geometryInstances?o.geometryInstances[0]:o._primitiveOptions.geometryInstances[0]).id?r.id:"")){i=o;break}}return i},myCesium.lightFeat_hover=function(e="",t="",i=!0){if(e&&t){i&&e.removeAll();let l=t.billboard||"",o=t.polyline||"",r=t.polygon||"",n="",a="";!l||o||r?l||!o||r?!l&&o&&r&&(n="polygon",a=t.polygon.hierarchy.getValue().positions||""):(n="polyline",a=t.polyline.positions.getValue()||""):(n="point",t.billboard.scale=1.2);t.properties;let s="";if(a&&a.length>0){if("point"==n);else if("polyline"==n){let e=new Cesium.GroundPolylineGeometry({positions:a,width:3}),t=new Cesium.GeometryInstance({title:"高亮线图形",geometry:e});s=new Cesium.GroundPolylinePrimitive({geometryInstances:t,appearance:new Cesium.PolylineMaterialAppearance({material:Cesium.Material.fromType("Color",{color:new Cesium.Color(0,1,1,1)})})})}else{let e=new Cesium.GroundPolylineGeometry({positions:a,width:3}),t=new Cesium.GeometryInstance({title:"高亮面图形",geometry:e});s=new Cesium.GroundPolylinePrimitive({geometryInstances:t,appearance:new Cesium.MaterialAppearance({material:Cesium.Material.fromType("Color",{color:new Cesium.Color(0,1,1,1)})})})}s&&e&&e.add(s)}}},myCesium.lightFeat_click=function(e="",t="",i=!0){if(e&&t){i&&e.removeAll();let l=t.billboard||"",o=t.polyline||"",r=t.polygon||"",n="",a="";!l||o||r?l||!o||r?!l&&o&&r&&(n="polygon",a=t.polygon.hierarchy.getValue().positions||""):(n="polyline",a=t.polyline.positions.getValue()||""):(n="point",t.billboard.scale=1.2);let s=t.properties,u=t.properties.isHighLight?t.properties.isHighLight._value:"false",g=t.properties.globalId?t.properties.globalId._value:"";s.hasProperty("isHighLight")||s.addProperty("isHighLight","false"),s.hasProperty("globalId")||s.addProperty("globalId","");let m="";if(a&&a.length>0){if("point"==n);else if("polyline"==n){let e=new Cesium.GroundPolylineGeometry({id:g,positions:a,width:3}),t=new Cesium.GeometryInstance({title:"高亮线图形",id:g,geometry:e});m=new Cesium.GroundPolylinePrimitive({id:g,geometryInstances:t,appearance:new Cesium.PolylineMaterialAppearance({material:Cesium.Material.fromType("Color",{color:new Cesium.Color(0,1,1,1)})})})}else{let e=new Cesium.PolygonGeometry({id:g,polygonHierarchy:new Cesium.PolygonHierarchy(a)}),t=new Cesium.GeometryInstance({id:g,title:"几何属性",geometry:e});m=new Cesium.GroundPrimitive({id:g,geometryInstances:t,appearance:new Cesium.MaterialAppearance({material:Cesium.Material.fromType("Color",{color:new Cesium.Color(0,0,1,.1)})})})}m&&e&&"false"==u?(e.add(m),t.properties.isHighLight._value="true"):t.properties.isHighLight._value="false"}}},myCesium.getEntityByGlobalId=function(e="",t=""){let i=null;if(e&&t){let l=e.lyrType||"",o=[];"dataSource"==l?o=e.values:"entityLayer"==l&&(o=e._children);for(let e=0;e<o.length;e++){let l=o[e];if((l.properties.globalId?l.properties.globalId._value:"")==t){i=l;break}}}return i},myCesium.getXZMDLevelByCode=function(e=""){let t=null;if(e){let i=e.length;2==i?t="sheng":4==i?t="shi":6==i?t="xian":i>6&&(t="xiang")}return t},myCesium.getDataSourceByLyrId=function(e="",t=""){let i=null;if(e&&t){let l=e.dataSources;for(let e=0;e<l.length;e++){let o=l._dataSources[e],r=o.entities.lyrId||"";if(r&&r==t){i=o;break}}}return i},myCesium.getLyrObjByLyrId=function(e="",t=""){let i=null;if(e&&t)for(let l=0;l<e.length;l++){let o=e[l],r=o.lyrId||"",n=o.lyrType||"";if(r&&n&&r==t){i={layer:o,layerType:n},"dataSource"==n?i.layerFeats=o.values:"entityLayer"==n&&(i.layerFeats=o._children);break}}return i},myCesium.createLyrLegend=function(e,t,i="图例",l="black"){if(e&&t&&t.length>0){let s=document.getElementById(e),u=t.length;if(s){s.style.display="block";let e=s.getContext("2d");s.width=180;let g=36;s.height=g+27*u,e.font="16px Arial",e.fillStyle=l,e.fillText(i,s.width/2.5,25);for(var o=0;o<t.length;o++){let i=t[o],u=i.name||"",g=i.geoType||"";if(e.font="12px Arial",e.fillStyle=l,e.fillText(u,52,72+25*(o-1)),g)if("Point"==g){r(s,i.iconUrl||"",o)}else if("Polyline"==g){n(s,i.color||"black",o)}else if("Polygon"==g){a(s,i.color||"black",o)}}}}function r(e,t,i){let l=e.getContext("2d"),o=new Image;o.src=t,o.complete?l.drawImage(o,17,32+25*i,22,24):(o.onload=function(){l.drawImage(o,17,32+25*i,22,24)},o.onerror=function(){console.log("canvas图片加载失败,请重试！")})}function n(e,t,i){let l=e.getContext("2d");l.beginPath(),l.strokeStyle=t,l.lineWidth=2,l.moveTo(20,68+25*(o-1)),l.lineTo(35,68+25*(o-1)),l.stroke()}function a(e,t,i){let l=e.getContext("2d");l.fillStyle=t,l.fillRect(20,60+25*(o-1),15,15),l.strokeStyle=t,l.lineWidth=2,l.strokeRect(20,60+25*(o-1),15,15),l.strokeRect(20,60+25*(o-1),15,15)}},window.legendDataList=[],myCesium.createLyrLegend_plus=function(e,t,i="图例",l="black"){if(e&&t&&t.length>0){let s=document.getElementById(e);t.length;for(let e=0;e<t.length>0;e++)legendDataList.push(t[e]);let u=legendDataList.length;if(s){s.style.display="block";let e=s.getContext("2d");s.width=180;let t=36;s.height=t+27*u,e.font="16px Arial",e.fillStyle=l,e.fillText(i,s.width/2.5,25);for(var o=0;o<legendDataList.length;o++){let t=legendDataList[o],i=t.name||"",u=t.geoType||"";if(e.font="12px Arial",e.fillStyle=l,e.fillText(i,52,72+25*(o-1)),u)if("Point"==u){r(s,t.iconUrl||"",o)}else if("Polyline"==u){n(s,t.color||"black",o)}else if("Polygon"==u){a(s,t.color||"black",o)}}}}function r(e,t,i){let l=e.getContext("2d"),o=new Image;o.src=t,o.complete?l.drawImage(o,17,32+25*i,22,24):(o.onload=function(){l.drawImage(o,17,32+25*i,22,24)},o.onerror=function(){console.log("canvas图片加载失败,请重试！")})}function n(e,t,i){let l=e.getContext("2d");l.beginPath(),l.strokeStyle=t,l.lineWidth=2,l.moveTo(20,68+25*(o-1)),l.lineTo(35,68+25*(o-1)),l.stroke()}function a(e,t,i){let l=e.getContext("2d");l.fillStyle=t,l.fillRect(20,60+25*(o-1),15,15),l.strokeStyle=t,l.lineWidth=2,l.strokeRect(20,60+25*(o-1),15,15),l.strokeRect(20,60+25*(o-1),15,15)}},myCesium.getPolygonGraphicsCenter=function(e){let t="",i=window.turf||"";if(e&&i){let o=e.hierarchy.getValue();o.positions&&o.positions.length>0&&(o=o.positions);let r=function(e){let t=[];if(e&&e.length>0)for(let i=0;i<e.length;i++){let o=l(e[i]),r=o.longitude,n=o.latitude;t.push([r,n])}return t}(o),n=i.polygon([r]),a=i.centroid(n);t=i.getCoord(a)}else console.error("请检查turf.min.js文件是否被引入！");return t;function l(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t}},myCesium.getPolygonGraphicsCenter_car=function(e){let t="",i=window.turf||"";if(e&&i){let o=e.hierarchy.getValue();o.positions&&o.positions.length>0&&(o=o.positions);let r=function(e){let t=[];if(e&&e.length>0)for(let i=0;i<e.length;i++){let o=l(e[i]),r=o.longitude,n=o.latitude;t.push([r,n])}return t}(o),n=i.polygon([r]),a=i.centroid(n),s=i.getCoord(a);s&&s.length>0&&(t=Cesium.Cartesian3.fromDegrees(s[0],s[1]))}else console.error("请检查turf.min.js文件是否被引入！");return t;function l(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t}},myCesium.cartesian3sToWGS84s=function(e){let t=[];if(e&&e.length>0)for(let l=0;l<e.length;l++){let o=i(e[l]),r=o.longitude,n=o.latitude;t.push([r,n])}return t;function i(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t}},myCesium.cartesian3sToGeojson=function(e=[],t=""){let i=null,l=[];if(e&&e.length>0&&t){for(let t=0;t<e.length;t++){let i=o(e[t]),r=i.longitude,n=i.latitude;l.push([r,n])}"Point"==t?i={type:"Point",coordinates:l[0]}:"LineString"==t?i={type:"LineString",coordinates:l}:"Polygon"==t&&(l.push(l[0]),i={type:"Polygon",coordinates:[l]})}return i;function o(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t}},myCesium.createMultiPolygonEntity_sym=function(mianDatas,attr={},entityId="",symbol="",borderSym="",borderWidth="",lyrId=null,parentEntity=null){let mianEntity="",multimianEntity=[];null!=borderWidth&&""!=borderWidth&&(borderWidth=String(borderWidth)),parentEntity=parentEntity||null,attr.globalId||(attr.globalId=""),attr.lightColor||(attr.lightColor="#00FFFF"),attr.normalColor||(attr.normalColor="#FF0000"),attr.isHighLight||(attr.isHighLight="false"),attr.isEditable||(attr.isEditable="true");let color="true"==attr.isHighLight?attr.lightColor:attr.normalColor,width="true"==attr.isHighLight?4:2;if(mianDatas&&mianDatas.length>0&&entityId)for(let i=0;i<mianDatas.length;i++){let oneMianData=mianDatas[i][0];if(oneMianData&&oneMianData.length>0){let e=entityId,t=entityId+"_"+i,l=myCesium.transToCartesian3Coords(oneMianData);mianEntity=new Cesium.Entity({id:t,title:"多面实体要素",layerId:lyrId,parent:parentEntity,lightColor:attr.lightColor,normalColor:attr.normalColor,geoType:"MultiPolygon",relateId:e,properties:attr,show:!0,polyline:new Cesium.PolylineGraphics({positions:[].concat(l),width:width,clampToGround:!0,material:Cesium.Color.fromCssColorString(color).withAlpha(1)}),polygon:new Cesium.PolygonGraphics({hierarchy:l,material:Cesium.Color.fromCssColorString("#0000FF").withAlpha(.1)})})}symbol&&(mianEntity.polygon.material=symbol),borderSym&&(mianEntity.polyline.material=borderSym),borderWidth&&(mianEntity.polyline.width=eval(borderWidth)),multimianEntity.push(mianEntity)}return multimianEntity},myCesium.createMultiPolygonEntity=function(e,t={},i="",l="",o=null,r=null){let n="",a=[];r=r||null,t.globalId||(t.globalId=""),t.lightColor||(t.lightColor="#00FFFF"),t.normalColor||(t.normalColor="#FF0000"),t.isHighLight||(t.isHighLight="false"),t.isEditable||(t.isEditable="true");let s="true"==t.isHighLight?t.lightColor:t.normalColor,u="true"==t.isHighLight?4:2;if(e&&e.length>0&&i)for(let g=0;g<e.length;g++){let m=e[g][0];if(m&&m.length>0){let e=i,l=i+"_"+g,a=myCesium.transToCartesian3Coords(m);n=new Cesium.Entity({id:l,title:"多面实体",layerId:o,parent:r,lightColor:t.lightColor,normalColor:t.normalColor,geoType:"MultiPolygon",relateId:e,properties:t,show:!0,polyline:new Cesium.PolylineGraphics({positions:[].concat(a),width:u,clampToGround:!0,material:Cesium.Color.fromCssColorString(s).withAlpha(1)}),polygon:new Cesium.PolygonGraphics({hierarchy:a,material:Cesium.Color.fromCssColorString("#0000FF").withAlpha(.1)})})}l&&(n.polygon.material=l),a.push(n)}return a},myCesium.createPolygonEntity_sym=function(mianDatas,attr={},entityId="",symbol="",borderSym="",borderWidth=2,lyrId=null,parentEntity=null){let mianEntity="";null!=borderWidth&&""!=borderWidth&&(borderWidth=String(borderWidth)),parentEntity=parentEntity||null,attr.globalId||(attr.globalId=""),attr.lightColor||(attr.lightColor="#00FFFF"),attr.normalColor||(attr.normalColor="#FF0000"),attr.isHighLight||(attr.isHighLight="false"),attr.isEditable||(attr.isEditable="true");let color="true"==attr.isHighLight?attr.lightColor:attr.normalColor,width="true"==attr.isHighLight?4:2;if(mianDatas&&mianDatas.length>1&&entityId){let e=myCesium.transToCartesian3Coords(mianDatas);mianEntity=new Cesium.Entity({id:entityId,title:"面实体",layerId:lyrId,parent:parentEntity,lightColor:attr.lightColor,normalColor:attr.normalColor,geoType:"Polygon",properties:attr,show:!0,polyline:new Cesium.PolylineGraphics({positions:[].concat(e),width:width,clampToGround:!0,material:Cesium.Color.fromCssColorString(color).withAlpha(1)}),polygon:new Cesium.PolygonGraphics({hierarchy:e,material:Cesium.Color.fromCssColorString("#0000FF").withAlpha(.1)})})}else if(mianDatas&&mianDatas.length>0){let e=myCesium.transToCartesian3Coords(mianDatas);mianEntity=new Cesium.Entity({title:"面实体",layerId:lyrId,parent:parentEntity,lightColor:attr.lightColor,normalColor:attr.normalColor,geoType:"Polygon",properties:attr,show:!0,polyline:new Cesium.PolylineGraphics({positions:[].concat(e),width:width,clampToGround:!0,material:Cesium.Color.fromCssColorString(color).withAlpha(1)}),polygon:new Cesium.PolygonGraphics({hierarchy:e,material:Cesium.Color.fromCssColorString("#0000FF").withAlpha(.1)})})}return symbol&&(mianEntity.polygon.material=symbol),borderSym&&(mianEntity.polyline.material=borderSym),borderWidth&&(mianEntity.polyline.width=eval(borderWidth)),mianEntity},myCesium.createPolygonEntity=function(e,t={},i="",l="",o=null,r=null){let n="";r=r||null,t.globalId||(t.globalId=""),t.lightColor||(t.lightColor="#00FFFF"),t.normalColor||(t.normalColor="#FF0000"),t.isHighLight||(t.isHighLight="false"),t.isEditable||(t.isEditable="true");let a="true"==t.isHighLight?t.lightColor:t.normalColor,s="true"==t.isHighLight?4:2;if(e&&e.length>0&&i){let l=myCesium.transToCartesian3Coords(e);n=new Cesium.Entity({id:i,title:"面实体要素",layerId:o,parent:r,lightColor:t.lightColor,normalColor:t.normalColor,geoType:"Polygon",properties:t,show:!0,polyline:new Cesium.PolylineGraphics({positions:[].concat(l),width:s,clampToGround:!0,material:Cesium.Color.fromCssColorString(a).withAlpha(1)}),polygon:new Cesium.PolygonGraphics({hierarchy:l,material:Cesium.Color.fromCssColorString("#0000FF").withAlpha(.1)})})}else if(e&&e.length>0){let i=myCesium.transToCartesian3Coords(e);n=new Cesium.Entity({title:"面实体要素",layerId:o,parent:r,lightColor:t.lightColor,normalColor:t.normalColor,geoType:"Polygon",properties:t,show:!0,polyline:new Cesium.PolylineGraphics({positions:[].concat(i),width:s,clampToGround:!0,material:Cesium.Color.fromCssColorString(a).withAlpha(1)}),polygon:new Cesium.PolygonGraphics({hierarchy:i,material:Cesium.Color.fromCssColorString("#0000FF").withAlpha(.1)})})}return l&&(n.polygon.material=l,l.red&&(l.alpha=1,n.polyline.material=l)),n},myCesium.createPolygonEntity_car=function(e,t={},i="",l="",o=null,r=null){let n="";r=r||null,t.globalId||(t.globalId=""),t.lightColor||(t.lightColor="#00FFFF"),t.normalColor||(t.normalColor="#FF0000"),t.isHighLight||(t.isHighLight="false"),t.isEditable||(t.isEditable="true");let a="true"==t.isHighLight?t.lightColor:t.normalColor,s="true"==t.isHighLight?4:2;if(e&&e.length>0&&i){let l=e[0],u=e[e.length-1];l.x==u.x&&l.y==u.y&&l.z==u.z||e.push(l),n=new Cesium.Entity({id:i,title:"面实体",layerId:o,parent:r,lightColor:t.lightColor,normalColor:t.normalColor,geoType:"Polygon",properties:t,show:!0,polyline:new Cesium.PolylineGraphics({positions:[].concat(e),width:s,clampToGround:!0,material:Cesium.Color.fromCssColorString(a).withAlpha(1)}),polygon:new Cesium.PolygonGraphics({hierarchy:e,material:Cesium.Color.fromCssColorString("#0000FF").withAlpha(.1)})})}else if(e&&e.length>0){let i=e[0],l=e[e.length-1];i.x==l.x&&i.y==l.y&&i.z==l.z||e.push(i),n=new Cesium.Entity({title:"面实体",layerId:o,parent:r,lightColor:t.lightColor,normalColor:t.normalColor,geoType:"Polygon",properties:t,show:!0,polyline:new Cesium.PolylineGraphics({positions:[].concat(e),width:s,clampToGround:!0,material:Cesium.Color.fromCssColorString(a).withAlpha(1)}),polygon:new Cesium.PolygonGraphics({hierarchy:e,material:Cesium.Color.fromCssColorString("#0000FF").withAlpha(.1)})})}return l&&(n.polygon.material=l),n},myCesium.createMultiPolylineEntity=function(e,t={},i="",l="",o=null,r=null,n=!0){let a="",s=[];r=r||null,t.globalId||(t.globalId=""),t.lightColor||(t.lightColor="#00FFFF"),t.normalColor||(t.normalColor="#0000FF"),t.isHighLight||(t.isHighLight="false"),t.isEditable||(t.isEditable="true");let u="true"==t.isHighLight?t.lightColor:t.normalColor;if(e&&e.length>0&&i)for(let g=0;g<e.length;g++){let m=e[g];if(m&&m.length>0){let e=i,l=i+"_"+g,s=myCesium.transToCartesian3Coords(m);a=new Cesium.Entity({id:l,title:"多线实体",layerId:o,parent:r,lightColor:t.lightColor,normalColor:t.normalColor,geoType:"LineString",relateId:e,properties:t,show:!0,polyline:{positions:s,width:3,material:Cesium.Color.fromCssColorString(u).withAlpha(1),clampToGround:n}})}l&&(a.polyline.material=l),s.push(a)}return s},myCesium.createPolylineEntity=function(e,t={},i="",l="",o=null,r=null,n=!0){let a="";r=r||null,n=0!=n,t.globalId||(t.globalId=""),t.lightColor||(t.lightColor="#00FFFF"),t.normalColor||(t.normalColor="#0000FF"),t.isHighLight||(t.isHighLight="false"),t.isEditable||(t.isEditable="true");let s="true"==t.isHighLight?t.lightColor:t.normalColor;if(s="#0000FF",e&&e.length>0&&i){let l=myCesium.transToCartesian3Coords(e);a=new Cesium.Entity({id:i,title:"线实体",layerId:o,parent:r,lightColor:t.lightColor,normalColor:t.normalColor,geoType:"LineString",properties:t,show:!0,polyline:{positions:l,width:3,material:Cesium.Color.fromCssColorString("#0000FF").withAlpha(1),clampToGround:n}})}else if(e&&e.length>0){let i=myCesium.transToCartesian3Coords(e);a=new Cesium.Entity({title:"线实体",layerId:o,parent:r,lightColor:t.lightColor,normalColor:t.normalColor,geoType:"LineString",properties:t,show:!0,polyline:{positions:i,width:3,material:Cesium.Color.fromCssColorString("#0000FF").withAlpha(1),clampToGround:n}})}return l&&(a.polyline.material=l),a},myCesium.createPolylineEntity_car=function(e,t={},i="",l="",o=null,r=null,n=!0){let a="";r=r||null,t.globalId||(t.globalId=""),t.lightColor||(t.lightColor="#00FFFF"),t.normalColor||(t.normalColor="#0000FF"),t.isHighLight||(t.isHighLight="false"),t.isEditable||(t.isEditable="true");let s="true"==t.isHighLight?t.lightColor:t.normalColor;return e&&e.length>0&&i?a=new Cesium.Entity({id:i,title:"线实体",layerId:o,parent:r,lightColor:t.lightColor,normalColor:t.normalColor,geoType:"LineString",properties:t,show:!0,polyline:{positions:e,width:3,material:Cesium.Color.fromCssColorString(s).withAlpha(1),clampToGround:n}}):e&&e.length>0&&(a=new Cesium.Entity({title:"线实体",layerId:o,parent:r,geoType:"LineString",properties:t,show:!0,polyline:{positions:e,width:3,material:Cesium.Color.fromCssColorString(s).withAlpha(1),clampToGround:n}})),l&&(a.polyline.material=l),a},myCesium.createMultiPicPtEntity=function(e,t,i={},l="",o=null,r=null,n=""){let a="",s=[];if(r=r||null,n=n||Cesium.HeightReference.CLAMP_TO_GROUND,e&&e.length>0&&t&&l)for(let u=0;u<e.length;u++){let g=e[u],m=g[0]||"",h=g[1]||"",d=g[2]||0;if(g&&g.length>0){let e=l,s=l+"_"+u;a=new Cesium.Entity({id:s,title:"多点图标实体",layerId:o,parent:r,geoType:"Point",relateId:e,position:Cesium.Cartesian3.fromDegrees(m,h,d),show:!0,properties:i,billboard:{image:t,scale:1,scaleByDistance:new Cesium.NearFarScalar(150,1,8e6,0),heightReference:n}})}s.push(a)}return s},myCesium.createPicPtEntity=function(e,t,i={},l="",o=null,r=null,n=""){let a="";r=r||null,n=n||Cesium.HeightReference.CLAMP_TO_GROUND;let s=e[0]||"",u=e[1]||"",g=e[2]||0;return s&&u&&t&&l?a=new Cesium.Entity({id:l,title:"点图标实体",layerId:o,parent:r,geoType:"Point",position:Cesium.Cartesian3.fromDegrees(s,u,g),show:!0,properties:i,billboard:{image:t,scale:1,scaleByDistance:new Cesium.NearFarScalar(150,1,8e6,0),heightReference:n}}):s&&u&&t&&(a=new Cesium.Entity({title:"点图标实体",layerId:o,parent:r,geoType:"Point",position:Cesium.Cartesian3.fromDegrees(s,u,g),show:!0,properties:i,billboard:{image:t,scale:1,scaleByDistance:new Cesium.NearFarScalar(150,1,8e6,0),heightReference:n}})),a},myCesium.createPicPtEntity_car=function(e,t,i={},l="",o=null,r=null,n=""){let a="";return r=r||null,n=n||Cesium.HeightReference.CLAMP_TO_GROUND,e&&t&&l?a=new Cesium.Entity({id:l,title:"点图标实体",layerId:o,parent:r,geoType:"Point",position:e,show:!0,properties:i,billboard:{image:t,scale:1,scaleByDistance:new Cesium.NearFarScalar(150,1,8e6,0),heightReference:n}}):e&&t&&(a=new Cesium.Entity({title:"点图标实体",layerId:o,parent:r,geoType:"Point",position:e,show:!0,properties:i,billboard:{image:t,scale:1,scaleByDistance:new Cesium.NearFarScalar(150,1,8e6,0),heightReference:n}})),a},myCesium.createMultiDotEntity=function(e,t="#CEE723",i={},l="",o=null,r=null,n=""){let a="",s=[];if(r=r||null,t=t||"#CEE723",n=n||Cesium.HeightReference.CLAMP_TO_GROUND,e&&e.length>0&&l)for(let u=0;u<e.length;u++){let g=e[u],m=g[0]||"",h=g[1]||"",d=g[2]||0;if(g&&g.length>0){let e=l,s=l+"_"+u;a=new Cesium.Entity({id:s,title:"多圆点实体",layerId:o,parent:r,geoType:"Dot",relateId:e,position:Cesium.Cartesian3.fromDegrees(m,h,d),show:!0,properties:i,point:new Cesium.PointGraphics({pixelSize:10,color:Cesium.Color.fromCssColorString(t),outlineColor:Cesium.Color.fromCssColorString(t),outlineWidth:2,heightReference:n})})}s.push(a)}return s},myCesium.createMultiDotEntity_sym=function(e,t="#CEE723",i={},l="",o="",r=null,n=null,a=""){let s="",u=[];if(n=n||null,t=t||"#CEE723",a=a||Cesium.HeightReference.CLAMP_TO_GROUND,e&&e.length>0&&l)for(let g=0;g<e.length;g++){let m=e[g],h=m[0]||"",d=m[1]||"",c=m[2]||0;if(m&&m.length>0){let e=l,o=l+"_"+g;s=new Cesium.Entity({id:o,title:"多圆点实体",layerId:r,parent:n,geoType:"Dot",relateId:e,position:Cesium.Cartesian3.fromDegrees(h,d,c),show:!0,properties:i,point:new Cesium.PointGraphics({pixelSize:10,color:Cesium.Color.fromCssColorString(t),outlineColor:Cesium.Color.fromCssColorString(t),outlineWidth:2,heightReference:a})})}o&&(s.point.pixelSize=o),u.push(s)}return u},myCesium.createDotEntity_sym=function(e,t="#CEE723",i={},l="",o="",r=null,n=null,a=""){let s="";n=n||null,t=t||"#CEE723",a=a||Cesium.HeightReference.CLAMP_TO_GROUND;let u=e[0]||"",g=e[1]||"",m=e[2]||0;return u&&g&&l?s=new Cesium.Entity({id:l,title:"圆点实体",layerId:r,parent:n,geoType:"Dot",position:Cesium.Cartesian3.fromDegrees(u,g,m),show:!0,properties:i,point:new Cesium.PointGraphics({pixelSize:10,color:Cesium.Color.fromCssColorString(t),outlineColor:Cesium.Color.fromCssColorString(t),outlineWidth:2,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND})}):u&&g&&(s=new Cesium.Entity({title:"圆点实体",layerId:r,parent:n,geoType:"Dot",position:Cesium.Cartesian3.fromDegrees(u,g,m),show:!0,properties:i,point:new Cesium.PointGraphics({pixelSize:10,color:Cesium.Color.fromCssColorString(t),outlineColor:Cesium.Color.fromCssColorString(t),outlineWidth:2,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND})})),o&&(s.point.pixelSize=o),s},myCesium.createDotEntity=function(e,t="#CEE723",i={},l="",o=null,r=null,n=""){let a="";r=r||null,t=t||"#CEE723",n=n||Cesium.HeightReference.CLAMP_TO_GROUND;let s=e[0]||"",u=e[1]||"",g=e[2]||0;return s&&u&&l?a=new Cesium.Entity({id:l,title:"圆点实体",layerId:o,parent:r,geoType:"Dot",position:Cesium.Cartesian3.fromDegrees(s,u,g),show:!0,properties:i,point:new Cesium.PointGraphics({pixelSize:10,color:Cesium.Color.fromCssColorString(t),outlineColor:Cesium.Color.fromCssColorString(t),outlineWidth:2,heightReference:n})}):s&&u&&(a=new Cesium.Entity({title:"圆点实体",layerId:o,parent:r,geoType:"Dot",position:Cesium.Cartesian3.fromDegrees(s,u,g),show:!0,properties:i,point:new Cesium.PointGraphics({pixelSize:10,color:Cesium.Color.fromCssColorString(t),outlineColor:Cesium.Color.fromCssColorString(t),outlineWidth:2,heightReference:n})})),a},myCesium.createDotEntity_car=function(e,t="#CEE723",i={},l="",o=null,r=null,n=""){let a="";return r=r||null,t=t||"#CEE723",n=n||Cesium.HeightReference.CLAMP_TO_GROUND,e&&l?a=new Cesium.Entity({id:l,title:"圆点实体",layerId:o,parent:r,geoType:"Dot",position:e,show:!0,properties:i,point:new Cesium.PointGraphics({pixelSize:10,color:Cesium.Color.fromCssColorString(t),outlineColor:Cesium.Color.fromCssColorString(t),outlineWidth:2,heightReference:n})}):e&&(a=new Cesium.Entity({title:"圆点实体",layerId:o,parent:r,geoType:"Dot",position:e,show:!0,properties:i,point:new Cesium.PointGraphics({pixelSize:10,color:Cesium.Color.fromCssColorString(t),outlineColor:Cesium.Color.fromCssColorString(t),outlineWidth:2,heightReference:n})})),a},myCesium.hoverTipInfo=function(e,t,i,l=0,o=0){if(e&&t&&i){var r=document.getElementById("tipDiv");r||((r=document.createElement("div")).id="tipDiv",r.style="position:absolute;z-index:9999;font-size:14px;color: #003EF5;border: 1px solid #87E3F1;padding: 1px 8px;background-color: rgb(255, 255, 255);box-shadow: 0px 0px 10px 0PX rgba(17, 186, 236, 0.78);border-radius:8px;padding-top:5px;padding-bottom:5px;",window.document.body.appendChild(r)),r.innerHTML=i,r.style.display="block",r.style.left=e+l+"px",r.style.top=t+o+"px"}},myCesium.addManyPrimitiveCollection=function(e="",t=""){if(e&&t)for(let i=0;i<t.length;i++)e.add(t[i])},myCesium.findPrimitiveCollection=function(e="",t=""){let i="";if(e&&t){let l=e.scene.primitives._primitives.length,o=e.scene.primitives._primitives;for(let e=0;e<l;e++){let l=o[e];if(l.id&&l.id==t){i=l;break}}}return i},myCesium.WGS84ToWercator=function(e,t,i=0){let l={};if(e&&t&&i){let o=20037508.342789*e/180,r=Math.log(Math.tan((90+t)*Math.PI/360))/(Math.PI/180);l={x:o,y:r=20037508.34789*r/180+7.081154553416204e-10,z:i,srs:"ESPG3857"}}return l},myCesium.cartesian3ToWGS84=function(e){let t={};if(e){let i=Cesium.Cartographic.fromCartesian(e);t={longitude:Cesium.Math.toDegrees(i.longitude),latitude:Cesium.Math.toDegrees(i.latitude),height:i.height,srs:"ESPG4326"}}return t},myCesium.getElevationByCoords=function(wgs84Coords,terrainProvider,terrainLevel,callback){let coords=[];if(terrainLevel=eval(terrainLevel)||14,wgs84Coords&&wgs84Coords.length>0&&terrainProvider){for(let e=0;e<wgs84Coords.length;e++){let t=wgs84Coords[e][0]||"",i=wgs84Coords[e][1]||"";if(!t||!i)continue;let l=Cesium.Cartographic.fromDegrees(t,i);coords.push(l)}let promise=Cesium.sampleTerrain(terrainProvider,terrainLevel,coords);Cesium.when(promise,(function(updatedPositions){let coords_z=[];if(updatedPositions&&updatedPositions.length>0)for(let i=0;i<updatedPositions.length>0;i++){let lon2=Cesium.Math.toDegrees(updatedPositions[i].longitude),lat2=Cesium.Math.toDegrees(updatedPositions[i].latitude),ele=updatedPositions[i].height>=0?eval(updatedPositions[i].height):0;lon2&&lat2&&coords_z.push([lon2,lat2,ele])}callback(coords_z)}))}},myCesium.transToCartesian3Coords=function(e){let t=[];if(e&&e.length>0){let i=myCesium.transformToCesiumCoords(e);t=e[0]&&e[0].length>2?Cesium.Cartesian3.fromDegreesArrayHeights(i):Cesium.Cartesian3.fromDegreesArray(i)}return t},myCesium.transformToCesiumCoords=function(e){let t=[];if(e&&e.length>0)for(let i=0;i<e.length;i++){let l=e[i],o=l[0]||"",r=l[1]||"";if(o&&r&&(t.push(o),t.push(r),l.length>2)){let e=l[2]||0;t.push(e)}}return t},myCesium.getMapLevelByHeight=function(e){return e>48e6?0:e>24e6?1:e>12e6?2:e>6e6?3:e>3e6?4:e>15e5?5:e>75e4?6:e>375e3?7:e>187500?8:e>93750?9:e>46875?10:e>23437.5?11:e>11718.75?12:e>5859.38?13:e>2929.69?14:e>1464.84?15:e>732.42?16:e>366.21?17:18},window.drawStatus=!1,myCesium.setMountainCover=function(viewer){viewer&&viewer.scene.preRender.addEventListener((function(evt){var pitch=viewer.scene.camera.pitch;pitch&&eval(pitch)>-.45?window.drawStatus||(viewer.scene.globe.depthTestAgainstTerrain=!0):viewer.scene.globe.depthTestAgainstTerrain=!1}))},myCesium.disableSeeUndergroud=function(e=""){let t,i;if(e){e.clock.onTick.addEventListener((function(){e.camera.pitch>0&&(e.scene.screenSpaceCameraController.enableTilt=!1)}));let l=new Cesium.ScreenSpaceEventHandler(e.canvas);l.setInputAction((function(o){i=t=Cesium.Cartesian3.clone(o.position),l.setInputAction((function(l){(i=l.endPosition).y-t.y>0&&(e.scene.screenSpaceCameraController.enableTilt=!0)}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)}),Cesium.ScreenSpaceEventType.MIDDLE_DOWN),l.setInputAction((function(e){l.setInputAction((function(e){}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)}),Cesium.ScreenSpaceEventType.MIDDLE_UP)}},myCesium.getElevationByCoord2=function(lon="",lat="",viewer){let elevation=null;if(lon&&lat){let cartographic=Cesium.Cartographic.fromDegrees(eval(lon),eval(lat));return elevation=viewer.scene.globe.getHeight(cartographic)||0,eval(elevation)<=0&&(elevation=0),elevation}},myCesium.getCameraHeight=function(e=""){if(e){let t=e.scene.globe.ellipsoid,i=e.camera.position,l=(i=t.cartesianToCartographic(i)).height,o=e.scene.globe.getHeight(i);return height=l-o,height}},myCesium.getCameraHeight_gc=function(e=""){if(e){return e.scene.globe.ellipsoid.cartesianToCartographic(e.camera.position).height}},myCesium.getViewCenterPt=function(e=""){let t=null;if(e){let i=e.camera.pickEllipsoid(new Cesium.Cartesian2(e.canvas.clientWidth/2,e.canvas.clientHeight/2));if(i){let l=Cesium.Ellipsoid.WGS84.cartesianToCartographic(i);t={lon:180*l.longitude/Math.PI,lat:180*l.latitude/Math.PI,height:function(){if(e){return e.scene.globe.ellipsoid.cartesianToCartographic(e.camera.position).height}}()}}return t}},myCesium.getCurrentViewExtent=function(e=""){if(e){let t={},i=e.scene,l=i.globe.ellipsoid,o=i.canvas,r=e.camera.pickEllipsoid(new Cesium.Cartesian2(0,0),l),n=e.camera.pickEllipsoid(new Cesium.Cartesian2(o.width,o.height),l);if(r&&n){let e=l.cartesianToCartographic(r),i=l.cartesianToCartographic(n);t.xmin=Cesium.Math.toDegrees(e.longitude),t.ymax=Cesium.Math.toDegrees(e.latitude),t.xmax=Cesium.Math.toDegrees(i.longitude),t.ymin=Cesium.Math.toDegrees(i.latitude)}else if(!r&&n){let i=null,r=0;do{r=o.height?r+=10:o.height,i=e.camera.pickEllipsoid(new Cesium.Cartesian2(0,r),l)}while(!i);let a=l.cartesianToCartographic(i),s=l.cartesianToCartographic(n);t.xmin=Cesium.Math.toDegrees(a.longitude),t.ymax=Cesium.Math.toDegrees(a.latitude),t.xmax=Cesium.Math.toDegrees(s.longitude),t.ymin=Cesium.Math.toDegrees(s.latitude)}return t.height=Math.ceil(e.camera.positionCartographic.height),t}};var Cesium=window.Cesium||null;Cesium&&!Cesium.Viewer.prototype.then&&(Cesium.Viewer.prototype.then=function(e=function(){}){window.setTimeout(e,1e3)}),Cesium?Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI3NjRjNGFjNy1jNDM3LTQzMTktODVlYS05YmFmOTAxYjk5MWUiLCJpZCI6Mzk5MSwic2NvcGVzIjpbImFzbCIsImFzciIsImFzdyIsImdjIl0sImlhdCI6MTUzOTU3OTE2NX0.-25udUzENRJ66mnICMK8Hfc6xgF_VP7P4sWkSHaUjOQ":console.warn("未引入cesium.js文件！"),window.mapZoom=[{zoom:0,height:22e6},{zoom:1,height:22e6},{zoom:2,height:1355484},{zoom:3,height:1355484},{zoom:4,height:1355484},{zoom:5,height:1355484},{zoom:6,height:1355484},{zoom:7,height:1355484},{zoom:8,height:1355484},{zoom:9,height:1355484},{zoom:10,height:447996},{zoom:11,height:1355484},{zoom:12,height:217858},{zoom:13,height:72192},{zoom:14,height:1355484},{zoom:15,height:1355484},{zoom:16,height:1355484},{zoom:17,height:1355484},{zoom:18,height:1355484}]}]);